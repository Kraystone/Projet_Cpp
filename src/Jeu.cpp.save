#include "Jeu.h"
#include "time.h"
#include "stdlib.h"
#include "couleur.h"
#include "windows.h"
#include "Monstre.h"

using namespace std;

Jeu::Jeu()
{
    //ctor
    for(int i = 0; i < 5;i++){
        this->lesDonjons.push_back(new Donjon());
    }
    this->lesDonjons[0]->setNom("Donjon 1");
    this->lesDonjons[1]->setNom("Donjon 2");
    this->lesDonjons[2]->setNom("Donjon 3");
    this->lesDonjons[3]->setNom("Donjon 4");
    this->lesDonjons[4]->setNom("Donjon 5");
}

Jeu::~Jeu()
{
    //dtor
}
/* *********************************** Setter ********************************************* */

void Jeu::setDifficulty(int difficulty)
{
    this->difficulty=difficulty;
}

void Jeu::setLesDonjons(Donjon* donjon)
{
    this->lesDonjons.push_back(donjon);
}

/* *********************************** Getter ********************************************* */
int Jeu::getDifficulty()
{
    return this->difficulty;
}

vector<Donjon*> Jeu::getLesDonjons()
{
    for(unsigned int i=0; i<lesDonjons.size();i++){
        cout << this->lesDonjons[i]->getNom() << endl;
    }
    return this->lesDonjons;
}

Donjon* Jeu::getDonjon(int indexDonjon){
    return this->lesDonjons[indexDonjon];
}

/* ********************************* Methodes ******************************************* */

void Jeu::affichageElementSalle()
{
    int couleur;

    for(int i = 0;i < 5;i++){
        cout << lesDonjons[i]->getNom();
            for(int a = 0; a < 5;a++){
            this->lesDonjons[i]->getSalles(a)->setEnvironnement(rand() % 5 + 1);
            couleur = this->lesDonjons[i]->getSalles(a)->getEnvironnement();
            mettreEnCouleur(couleur,0);
            cout << "|";
            cout << this->lesDonjons[i]->getSalles(a)->getNum();
            cout << "|";
            mettreEnCouleur(7,0);
        }
        cout << endl;
    }
}

void Jeu::afficherMonstresSalles()
{
    for(int i =0;i < 5;i++){
        cout << lesDonjons[i]->getNom() << endl;
        for(int a =0;a < 5;a++){
            mettreEnCouleur(this->lesDonjons[i]->getSalles(a)->getEnvironnement(), 0);
            cout << "|";
            cout << "Salle n " << this->lesDonjons[i]->getSalles(a)->getNum();
            cout << "|" << endl;
            mettreEnCouleur(7,0);
            this->lesDonjons[i]->getSalles(a)->getLesMonstresDeLaSalle();
        }
    }
}


void Jeu::mettreEnCouleur(int t,int f)
{
    HANDLE H=GetStdHandle(STD_OUTPUT_HANDLE);
    SetConsoleTextAttribute(H,f*16+t);
}

